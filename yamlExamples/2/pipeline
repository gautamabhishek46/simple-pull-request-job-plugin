pipeline{
    agent{
        docker {
            image 'maven:3-alpine'
            label 'my_label'
            args  '-v /tmp:/tmp'
            customWorkspace 'path_to_workspace'
        }
    }

    tools{
        maven 'maven_3.0.1'
        tool_2 'jdk8'
    }

    environment{
        variable_1 = 'value_1'
        variable_2 = 'value_2'
    }

    stages{
        stage('Build'){
            environment{
                FILE = credentials('fileCredentialId')
                // username variable: LOGIN_USR, password variable: LOGIN_PSW
                LOGIN = credentials('usernamePasswordId')
            }
            steps{
                sh 'path_1.sh'  // or bat
                sh 'path_2.sh'
                sh 'path_3.sh'
            }
        }

        stage('Publish Reports'){
            steps{
                junit testResults: 'location_of_report_1',  allowEmptyResults: true
                junit testResults: 'location_of_report_2',  allowEmptyResults: true
            }
        }

        stage('Push to Target'){
            steps{
                gitPush credentialId: 'gitCredentialID', url: 'gitRepoUrl', branch: 'branchName'
            }
        }
    }
}