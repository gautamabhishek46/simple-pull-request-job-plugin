pipeline{
    agent{
        node{
            label 'my_lable'
            customWorkspace 'path_to_workspace'
        }
    }

    tools{
        tool_1 'tool_1_name'
        tool_2 'tool_2_name'
    }

    environment{
        variable_1 = 'value_1'
        variable_2 = 'value_2'
    }

    stages{
        stage('Build'){
            steps{
                withCredentials([[$class: 'usernamePassword', credentialsId: 'usernamePasswordId',
                usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD']]) {
                    withCredentials([file(credentialsId: 'fileCredentialId', variable: 'FILE')]) {
                        sh 'path_1.sh'  // or bat
                        sh 'path_2.sh'
                        sh 'path_3.sh'
                    }
                }
            }
        }

        stage('Publish Reports'){
            steps{
                junit testResults: 'location_of_report_1',  allowEmptyResults: true
                junit testResults: 'location_of_report_2',  allowEmptyResults: true
            }
        }

        stage('Push to Target'){
            steps{
                gitPush credentialId: 'gitCredentialID', url: 'gitRepoUrl', branch: 'branchName'
            }
        }
    }
}